(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53fe0c7a"],{"053b":function(e,t,s){var n=s("1e2c"),o=s("d910").f,i=Function.prototype,c=i.toString,r=/^\s*function ([^ (]*)/,a="name";n&&!(a in i)&&o(i,a,{configurable:!0,get:function(){try{return c.call(this).match(r)[1]}catch(e){return""}}})},"417b":function(e,t,s){"use strict";s("4ba0")},"4ba0":function(e,t,s){},"885a":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.userName?s("div",{class:["button",e.lock?"disabled":""],on:{click:e.submit}},[e._v("抢答")]):s("div",{staticClass:"login"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],attrs:{type:"text",laceholder:"请输入姓名"},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}}),s("button",{staticClass:"login",on:{click:e.login}},[e._v("登录")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"mark"},[e._v(" "+e._s(0===e.count?"开始":e.count)+" ")])])},o=[],i=(s("053b"),{data:function(){return{user:"",userName:"",msg:"",lock:!0,count:0,timer:null,show:!1}},mounted:function(){var e=sessionStorage.getItem("userName");this.userName=e,e&&this.initWebSocket()},methods:{login:function(){this.user&&(this.userName=this.user,sessionStorage.setItem("userName",this.user),this.initWebSocket())},initWebSocket:function(){var e="ws://127.0.0.1:1104";this.websock=new WebSocket(e),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){var e={role:"user",type:"login",name:this.userName};this.websocketsend(JSON.stringify(e))},websocketonerror:function(){this.initWebSocket()},websocketonmessage:function(e){var t=JSON.parse(e.data);"answer"===t.type?this.handlerAnswer(t):"start"===t.type&&this.countTime()},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("断开连接",e)},countTime:function(){var e=this;clearInterval(this.timer),this.show=!0,this.count=3,this.timer=setInterval((function(){0===e.count?(e.lock=!1,e.show=!1,clearInterval(e.timer)):e.count-=1}),1e3)},submit:function(){if(!this.lock){this.lock=!0;var e={name:this.userName,type:"answer"};this.websocketsend(JSON.stringify(e))}},handlerAnswer:function(e){"success"===e.code?this.$toast.success("抢答成功"):this.$toast.fail("抢答失败, 已经被".concat(e.name,"抢答"))}}}),c=i,r=(s("417b"),s("c701")),a=Object(r["a"])(c,n,o,!1,null,"c333ce0e",null);t["default"]=a.exports}}]);
//# sourceMappingURL=chunk-53fe0c7a.a28052b2.js.map